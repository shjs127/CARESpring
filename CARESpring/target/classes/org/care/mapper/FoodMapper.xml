<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.care.mapper.FoodMapper">


	<select id="selectStore" resultType="org.care.domain.StoreInfo">
		SELECT *
		FROM STOREINFO
		WHERE
		STORENO = #{storeNo}
	</select>

	<select id="storeLogin" resultType="org.care.domain.StoreInfo">
		SELECT *
		FROM STOREINFO
		WHERE
		MANAGENO = #{manageNo} and STORENO = #{storeNo}
	</select>

	<select id="selectDetail"
		resultType="org.care.domain.DetailInfo">
		SELECT *
		FROM DETAILINFO
	    WHERE STORENO = #{storeNo}
	</select>


	<select id="selectReview"
		resultType="org.care.domain.ReviewInfo">
		SELECT *
		FROM REVIEWINFO, USERINFO
		WHERE REVIEWINFO.STORENO = #{storeNo} AND USERINFO.USERNO = 1 
		ORDER BY REVIEWNO DESC
	</select>

	<select id="selectReviewList"
		resultType="org.care.domain.ReviewInfo">
		SELECT *
		FROM REVIEWINFO
		WHERE USERNO = 1

	</select>

	<select id="selectMenu" resultType="org.care.domain.MenuInfo">
		SELECT *
		from MENUINFO
		WHERE
		STORENO = #{storeNo}
	</select>

	<select id="insertReview"
		resultType="org.care.domain.ReviewInfo">
		INSERT INTO REVIEWINFO (REVIEWNO, USERNO, STORENO,
		AVGSCORE, REVIEWCONTENTS, REVIEWDATE)
		VALUES(REVIEWNUM.NEXTVAL,1,#{storeNo},#{avgScore},#{reviewContents}, SYSDATE)
	</select>

	<delete id="deleteReview" parameterType="string">
		DELETE REVIEWINFO
		WHERE REVIEWNO = #{param}
	</delete>

	<select id="selectFavorite"
		resultType="org.care.domain.Favorite">
		SELECT STOREINFO.STORENO , STOREINFO.STORENAME
		FROM
		STOREINFO, FAVORITE
		WHERE STOREINFO.STORENO = FAVORITE.STORENO AND
		FAVORITE.USERNO=1
		AND FAVORITECHECK = 'y'

	</select>

</mapper>


